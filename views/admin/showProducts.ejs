<%- include('../adminHeader.ejs') -%>

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="fw-bold py-3 mb-4">
                <span class="text-muted fw-light">Users/</span> Show Products
              </h4>

              <!-- Basic Layout -->
              <div class="card">
                
                <div class="table-responsive text-nowrap">
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Brand</th>
                        <th>Category</th>
                        <th>Image</th>
                        <th>Price</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody class="table-border-bottom-0">
                      <% products.forEach(function(x) { %>
                      <tr>
                        <td><i class="fab fa-angular fa-lg text-danger me-3"></i> <strong><%= x.name %></strong></td>
                        <td><%= x.brand.brand %></td>
                        <td><%= x.category.category%></td> 
                        <td> <img src="/<%= x.image %>" style="height:60px;width: 60px;"> </td> 
                        <td><%= x.price %></td> 
                        
                        
                        <td>
                          

                            <form action="/admin/editProductForm/<%= x._id %>" method="post" enctype="multipart/form-data">
                              <button type="submit" class="btn btn-secondary " style="width: 100px; height: 35px; margin-top: 2px;" >Edit</button>
                            </form>
                            <% if( x.status == "listed") { %>
                              <form action="/admin/unListProduct/<%= x._id %>" method="post" enctype="multipart/form-data">
                              <button type="submit" class="btn btn-danger  " style="width: 100px; height: 35px;">unlist</button>
                            </form>
                            <% } else { %>
                            <form action="/admin/listProduct/<%= x._id %>" method="post" enctype="multipart/form-data">
                              <button type="submit" class="btn btn-danger" style="width: 100px; height: 35px;">list</button>
                            </form>

                            <% } %>
                          
                        </td>
                      </tr>
                     <% }) %>
                      

                     <section class="d-flex justify-content-center mt-2">
                      <% if(hasPreviousPage){ %>
                        <a style="text-decoration: none;padding: .5rem; margin:0 1rem; color:rgb(223, 54, 54)" class="text-center"
                          href="/admin/showProducts?page=<%= PreviousPage %>"><i class="fa-solid fa-chevron-left"
                            aria-hidden="true"></i></a>
                        <% } %>
                          <a style="text-decoration: none;padding: .5rem; margin:0 1rem; color:black; border: 1px solid black;"
                            href="/admin/showProducts?page=<%= page %>">
                            <%= page %>
                          </a>
                          <% if(hasNextPage) { %>
                            <a style="text-decoration: none;padding: .5rem; margin:0 1rem; color:black;"
                              href="/admin/showProducts?page=<%=  page+1 %>"><i class="fa-solid fa-chevron-right"
                                aria-hidden="true"></i></a>
                            <% } %>
                      </section>


                    </tbody>
                  </table>
                </div>
              </div>
            <!-- / Content -->

<%- include('../adminFooter.ejs') -%>