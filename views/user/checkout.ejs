<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Minishop - Free Bootstrap 4 Template by Colorlib</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="../../public/stylesheet/open-iconic-bootstrap.min.css"
    />
    <link rel="stylesheet" href="../../public/stylesheet/animate.css" />

    <link
      rel="stylesheet"
      href="../../public/stylesheet/owl.carousel.min.css"
    />
    <link
      rel="stylesheet"
      href="../../public/stylesheet/owl.theme.default.min.css"
    />
    <link rel="stylesheet" href="../../public/stylesheet/magnific-popup.css" />

    <link rel="stylesheet" href="../../public/stylesheet/aos.css" />

    <link rel="stylesheet" href="../../public/stylesheet/ionicons.min.css" />

    <link
      rel="stylesheet"
      href="../../public/stylesheet/bootstrap-datepicker.css"
    />
    <link
      rel="stylesheet"
      href="../../public/stylesheet/jquery.timepicker.css"
    />

    <link rel="stylesheet" href="../../public/stylesheet/flaticon.css" />
    <link rel="stylesheet" href="../../public/stylesheet/icomoon.css" />
    <link rel="stylesheet" href="../../public/stylesheet/style.css" />

    <link rel="stylesheet" type="text/css" href="/public/stylesheet/css/util.css" />
    <link rel="stylesheet" type="text/css" href="/public/stylesheet/css/main.css">

    <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

   
  <!-- ajax -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  </head>
  <body class="goto-here">
    <div class="py-1 bg-black">
      <div class="container">
        <div
          class="row no-gutters d-flex align-items-start align-items-center px-md-0"
        >
          <div class="col-lg-12 d-block">
            <div class="row d-flex">
              <div class="col-md pr-4 d-flex topper align-items-center">
                <div
                  class="icon mr-2 d-flex justify-content-center align-items-center"
                >
                  <span class="icon-phone2"></span>
                </div>
                <span class="text">+ 1235 2355 98</span>
              </div>
              <div class="col-md pr-4 d-flex topper align-items-center">
                <div
                  class="icon mr-2 d-flex justify-content-center align-items-center"
                >
                  <span class="icon-paper-plane"></span>
                </div>
                <span class="text">youremail@email.com</span>
              </div>
              <div
                class="col-md-5 pr-4 d-flex topper align-items-center text-lg-right"
              >
                <span class="text"
                  >3-5 Business days delivery &amp; Free Returns</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <nav
      class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light"
      id="ftco-navbar"
    >
      <div class="container">
        <a class="navbar-brand" href="index.html">Minishop</a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#ftco-nav"
          aria-controls="ftco-nav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="oi oi-menu"></span> Menu
        </button>

        <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a href="index.html" class="nav-link">Home</a>
            </li>
            <li class="nav-item dropdown active">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="dropdown04"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
                >Catalog</a
              >
              <div class="dropdown-menu" aria-labelledby="dropdown04">
                <a class="dropdown-item" href="shop.html">Shop</a>
                <a class="dropdown-item" href="product-single.html"
                  >Single Product</a
                >
                <a class="dropdown-item" href="cart.html">Cart</a>
                <a class="dropdown-item" href="checkout.html">Checkout</a>
              </div>
            </li>
            <li class="nav-item">
              <a href="about.html" class="nav-link">About</a>
            </li>
            <li class="nav-item">
              <a href="blog.html" class="nav-link">Blog</a>
            </li>
            <li class="nav-item">
              <a href="contact.html" class="nav-link">Contact</a>
            </li>
            <li class="nav-item cta cta-colored">
              <a href="cart.html" class="nav-link"
                ><span class="icon-shopping_cart"></span>[0]</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Navbar -->

    <!-- breadcrumb -->
    <div class="m-t-70 d-none d-lg-block"></div>
    <div class="container ">
        <div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
            <a href="/" class="stext-109 cl8 hov-cl1 trans-04">
                Home
                <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
            </a>
            <a href="/cart" class="stext-109 cl8 hov-cl1 trans-04">
                Shopping Cart
                <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
            </a>
            <span class="stext-109 cl4">
                Checkout
            </span>
        </div>
    </div>
    <!-- Checkout -->
    <div class="container bg0 p-t-20 p-b-85 ">
        <div class="row">
            <div class="col-lg-10 col-xl-7 m-lr-auto ">
                <div class="m-l-25 m-r--38 m-lr-0-xl">
                    <div class="wrap-table-shopping-cart">
                        <% if(address !=0){ %>
                            <table class="table-shopping-cart">
                                <tr class="table_head">
                                    <th class="p-l-15">Address</th>
                                    <td class="p-r-20"><button class="btn text-primary" data-toggle="collapse"
                                            data-target="#collapseExample" aria-expanded="false"
                                            aria-controls="collapseExample"> Change</button></td>
                                </tr>
                                <tr class="table_row">
                                    <td class="p-l-30">
                                        <p><strong>Full Name :</strong>
                                            <%= address[index].fullName %>
                                        </p>
                                        <p><strong>Phone Number :</strong>
                                            <%= address[index].phoneNumber %>
                                        </p>
                                        <p><strong>Address :</strong>
                                            <%= address[index].address %>, <%= address[index].city %> <br>
                                                    <%= address[index].state %> - <%= address[index].pincode %></span>
                                        </p>
                                    </td>
                                </tr>
                            </table>
                            <div class="collapse" id="collapseExample">
                                <form action="/changeAddress" method="post">
                                    <div class="card card-body">
                                        <% address.forEach(function(adrs,index){ %>
                                            <div class="form-check card card-body">
                                                <input class="form-check-input" type="radio" value="<%= index %>"
                                                    name="index" id="exampleRadios1" value="option1">
                                                <label class="form-check-label" for="exampleRadios1">
                                                    <p><strong>Full Name :</strong>
                                                        <%= adrs.fullName %>
                                                    </p>
                                                    <p><strong>Phone Number :</strong>
                                                        <%= adrs.phoneNumber %>
                                                    </p>
                                                    <p><strong>Address :</strong>
                                                        <%= adrs.address %>, <%= adrs.city %> <br>
                                                                <%= adrs.state %> - <%= adrs.pincode %></span>
                                                    </p>
                                                </label>
                                            </div>
                                            <% }) %>
                                                <button type="submit"
                                                    class="flex-c-m stext-101 cl2 size-119 bg8 bor13 hov-btn3 p-lr-15 trans-04 pointer m-tb-10">
                                                    Deliver Here
                                                </button>
                                    </div>
                                </form>
                            </div>
                            <% } %>
                                <div class="card card-body">
                                    <button type="button" data-toggle="collapse" data-target="#newAddress"
                                        aria-expanded="false" aria-controls="newAddress">
                                        Add new address
                                    </button>
                                    <div class="collapse" id="newAddress">
                                        <div class="card card-body">

                                            <form action="/chekoutNewAddress" method="POST" class="row mt-4">
                                                <div class="col-md-6 mb-3">
                                                    <label for="validationDefault01" class="form-label">Full
                                                        name</label>
                                                    <input type="text" name="fullName" class="form-control"
                                                        id="validationDefault01" required>
                                                </div>
                                                <div class="col-md-6 mb-3">
                                                    <label for="validationDefault02" class="form-label">Phone
                                                        number</label>
                                                    <input type="number" name="phoneNumber" class="form-control"
                                                        id="validationDefault02" required>
                                                </div>
                                                <div class="col-md-8 mb-3">
                                                    <label for="validationDefault02" class="form-label">Address</label>
                                                    <input type="text" name="address" class="form-control"
                                                        id="validationDefault02" required>
                                                </div>
                                                <div class="col-md-4 mb-3">
                                                    <label for="validationDefault02" class="form-label">Type</label>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="type"
                                                            id="inlineRadio1" value="Home">
                                                        <label class="form-check-label" for="inlineRadio1">Home</label>
                                                    </div>
                                                    <div class="form-check form-check-inline p-l-15">
                                                        <input class="form-check-input" type="radio" name="type"
                                                            id="inlineRadio2" value="Office">
                                                        <label class="form-check-label"
                                                            for="inlineRadio2">Office</label>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 mb-3">
                                                    <label for="validationDefault04" class="form-label">City</label>
                                                    <input type="text" name="city" class="form-control"
                                                        id="validationDefault03" required>
                                                </div>
                                                <div class="col-md-4 mb-3 ">
                                                    <label for="validationDefault03" class="form-label">State</label>
                                                    <select name="state" id="state" class="form-control" required>
                                                        <option value="">Select one</option>
                                                        <option value="Andhra Pradesh">Andhra Pradesh</option>
                                                        <option value="Andaman and Nicobar Islands">Andaman and Nicobar
                                                            Islands
                                                        </option>
                                                        <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                                        <option value="Assam">Assam</option>
                                                        <option value="Bihar">Bihar</option>
                                                        <option value="Chandigarh">Chandigarh</option>
                                                        <option value="Chhattisgarh">Chhattisgarh</option>
                                                        <option value="Delhi">Delhi</option>
                                                        <option value="Lakshadweep">Lakshadweep</option>
                                                        <option value="Puducherry">Puducherry</option>
                                                        <option value="Goa">Goa</option>
                                                        <option value="Gujarat">Gujarat</option>
                                                        <option value="Haryana">Haryana</option>
                                                        <option value="Himachal Pradesh">Himachal Pradesh</option>
                                                        <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                        <option value="Jharkhand">Jharkhand</option>
                                                        <option value="Karnataka">Karnataka</option>
                                                        <option value="Kerala">Kerala</option>
                                                        <option value="Madhya Pradesh">Madhya Pradesh</option>
                                                        <option value="Maharashtra">Maharashtra</option>
                                                        <option value="Manipur">Manipur</option>
                                                        <option value="Meghalaya">Meghalaya</option>
                                                        <option value="Mizoram">Mizoram</option>
                                                        <option value="Nagaland">Nagaland</option>
                                                        <option value="Odisha">Odisha</option>
                                                        <option value="Punjab">Punjab</option>
                                                        <option value="Rajasthan">Rajasthan</option>
                                                        <option value="Sikkim">Sikkim</option>
                                                        <option value="Tamil Nadu">Tamil Nadu</option>
                                                        <option value="Telangana">Telangana</option>
                                                        <option value="Tripura">Tripura</option>
                                                        <option value="Uttar Pradesh">Uttar Pradesh</option>
                                                        <option value="Uttarakhand">Uttarakhand</option>
                                                        <option value="West Bengal">West Bengal</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-4 mb-3">
                                                    <label for="validationDefaultUsername"
                                                        class="form-label">Pincode</label>
                                                    <div class="input-group">
                                                        <input type="number" name="pincode" class="form-control"
                                                            id="validationDefaultUsername" minlength="6" required>
                                                    </div>
                                                </div>

                                                <div class="col-12 ">
                                                    <button class="btn btn-primary" type="submit">Submit</button>
                                                </div>
                                            </form>

                                        </div>
                                    </div>
                                </div>
                    </div>
                </div>
            </div>


            <div class="col-sm-10 col-lg-7 col-xl-5 m-lr-auto m-b-50">
                <div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
                    <h4 class="mtext-109 cl2 p-b-30">Your order</h4>
                    <% cartItems.forEach(function(product){ %>
                        <div class="flex-w flex-t bor12 p-b-13">
                            <img src="/<%= product.productId.image[0] %>" alt="" style="width:60px">
                            <div class="m-l-30">
                                <p><strong>
                                        <%= product.productId.productName %>
                                    </strong></p>
                                <p><strong>Qty : <%= product.quantity %> </strong></p>
                                <p><strong>Total : <%= product.total %> </strong></p>
                            </div>
                        </div>
                        <% }) %>

                            <div class="flex-w flex-t p-t-27 p-b-33">
                                <div class="size-208 p-b-5">
                                    <span class="mtext-101 cl2">Sub Total: </span>
                                </div>

                                <div class="size-209 p-t-1 p-b-5 d-flex justify-content-end">
                                    <span class="mtext-110 cl2">
                                        <%= cartTotal %>
                                    </span>
                                </div>
                                <div class="size-208 p-b-5">
                                    <span class="mtext-101 cl2">Shpping: </span>
                                </div>

                                <div class="size-209 p-t-1 p-b-5 d-flex justify-content-end">
                                    <span class="mtext-110 cl2 ">Free</span>
                                </div>

                                <div class="size-208 p-b-5 ">
                                    <span class="mtext-101 cl2">Total: </span>
                                </div>

                                <div class="size-209 p-t-1 p-b-5 d-flex justify-content-end">
                                    <span class="mtext-110 cl2">₹ <%= cartTotal %></span>
                                </div>
                            </div>

                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="paymentMethod" id="paynow"
                                    value="Razorpay" checked>
                                <label class="form-check-label" for="paynow">
                                    Razorpay
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="paymentMethod" id="cod" value="COD">
                                <label class="form-check-label" for="cod">
                                    Cash on delivery
                                </label>
                            </div>
                            <button onclick="placeOrder('<%=index%>')"
                                class="btn-success flex-c-m stext-101 cl0 size-116 bor14 p-lr-15 trans-04 pointer">
                                Place Order
                            </button>

                </div>
            </div>
        </div>
    </div>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>

        function placeOrder(index) {
            let num = parseInt(index)
            let paymentMethod = document.getElementById("cod").checked ? "COD" : "Razorpay"

            $.ajax({
                url: '/login/placeOrder',
                data: {
                    index: num,
                    paymentMethod: paymentMethod
                },
                method: 'post',
                success: (response) => {
                    if (response.codSuccess) {
                        location.href = "/login/orderSuccess"
                    } else {
                        razorpayPayment(response)

                    }
                }
            })

            function razorpayPayment(order) {
                var options = {
                    "key": "rzp_test_nOABmeWu0jJGLN", // Enter the Key ID generated from the Dashboard
                    "amount": order.amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
                    "currency": "INR",
                    "name": "Ride",
                    "description": "Test Transaction",
                    "image": "https://example.com/your_logo",
                    "order_id": order.id, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
                    "callback_url": "https://eneqd3r9zrjok.x.pipedream.net/",
                    "handler": function (response) {
                        // alert(response.razorpay_payment_id);
                        // alert(response.razorpay_order_id);
                        // alert(response.razorpay_signature)

                        verifyPayment(response, order)
                    },
                    "prefill": {
                        "name": "Gaurav Kumar",
                        "email": "gaurav.kumar@example.com",
                        "contact": "9999999999"
                    },
                    "notes": {
                        "address": "Razorpay Corporate Office"
                    },
                    "theme": {
                        "color": "#7c7efc"
                    }
                };
                function verifyPayment(payment, order) {
                    $.ajax({
                        url: '/login/verifyPayment',
                        data: {
                            payment,
                            order
                        },
                        method: 'post',
                        success: (response) => {
                            if (response.status) {
                                location.href = "/login/orderSuccess"
                            } else {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Oops...',
                                    text: 'Something went wrong!',
                                })
                            }
                        }
                    })
                }
                var rzp1 = new Razorpay(options);
                rzp1.open();

            }
        }
    </script>
  <footer class="ftco-footer ftco-section">
    <div class="container">
      <div class="row">
        <div class="mouse">
          <a href="#" class="mouse-icon">
            <div class="mouse-wheel">
              <span class="ion-ios-arrow-up"></span>
            </div>
          </a>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-md">
          <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2">Minishop</h2>
            <p>
              Far far away, behind the word mountains, far from the countries
              Vokalia and Consonantia.
            </p>
            <ul
              class="ftco-footer-social list-unstyled float-md-left float-lft mt-5"
            >
              <li class="ftco-animate">
                <a href="#"><span class="icon-twitter"></span></a>
              </li>
              <li class="ftco-animate">
                <a href="#"><span class="icon-facebook"></span></a>
              </li>
              <li class="ftco-animate">
                <a href="#"><span class="icon-instagram"></span></a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md">
          <div class="ftco-footer-widget mb-4 ml-md-5">
            <h2 class="ftco-heading-2">Menu</h2>
            <ul class="list-unstyled">
              <li><a href="#" class="py-2 d-block">Shop</a></li>
              <li><a href="#" class="py-2 d-block">About</a></li>
              <li><a href="#" class="py-2 d-block">Journal</a></li>
              <li><a href="#" class="py-2 d-block">Contact Us</a></li>
            </ul>
          </div>
        </div>
        <div class="col-md-4">
          <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2">Help</h2>
            <div class="d-flex">
              <ul class="list-unstyled mr-l-5 pr-l-3 mr-4">
                <li>
                  <a href="#" class="py-2 d-block">Shipping Information</a>
                </li>
                <li>
                  <a href="#" class="py-2 d-block">Returns &amp; Exchange</a>
                </li>
                <li>
                  <a href="#" class="py-2 d-block">Terms &amp; Conditions</a>
                </li>
                <li><a href="#" class="py-2 d-block">Privacy Policy</a></li>
              </ul>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">FAQs</a></li>
                <li><a href="#" class="py-2 d-block">Contact</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md">
          <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2">Have a Questions?</h2>
            <div class="block-23 mb-3">
              <ul>
                <li>
                  <span class="icon icon-map-marker"></span
                  ><span class="text"
                    >203 Fake St. Mountain View, San Francisco, California,
                    USA</span
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon icon-phone"></span
                    ><span class="text">+2 392 3929 210</span></a
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon icon-envelope"></span
                    ><span class="text">info@yourdomain.com</span></a
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 text-center">
          <p>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;
            <script>
              document.write(new Date().getFullYear());
            </script>
            All rights reserved | This template is made with
            <i class="icon-heart color-danger" aria-hidden="true"></i> by
            <a href="https://colorlib.com" target="_blank">Colorlib</a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
          </p>
        </div>
      </div>
    </div>
  </footer>

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen">
    <svg class="circular" width="48px" height="48px">
      <circle
        class="path-bg"
        cx="24"
        cy="24"
        r="22"
        fill="none"
        stroke-width="4"
        stroke="#eeeeee"
      />
      <circle
        class="path"
        cx="24"
        cy="24"
        r="22"
        fill="none"
        stroke-width="4"
        stroke-miterlimit="10"
        stroke="#F96D00"
      />
    </svg>
  </div>

  <script src="../../public/js/jquery.min.js"></script>
  <script src="../../public/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="../../public/js/popper.min.js"></script>
  <script src="../../public/js/bootstrap.min.js"></script>
  <script src="../../public/js/jquery.easing.1.3.js"></script>
  <script src="../../public/js/jquery.waypoints.min.js"></script>
  <script src="../../public/js/jquery.stellar.min.js"></script>
  <script src="../../public/js/owl.carousel.min.js"></script>
  <script src="../../public/js/jquery.magnific-popup.min.js"></script>
  <script src="../../public/js/aos.js"></script>
  <script src="../../public/js/jquery.animateNumber.min.js"></script>
  <script src="../../public/js/bootstrap-datepicker.js"></script>
  <script src="../../public/js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="../../public/js/google-map.js"></script>
  <script src="../../public/js/main.js"></script>

  <script>
    $(document).ready(function () {
      var quantitiy = 0;
      $(".quantity-right-plus").click(function (e) {
        // Stop acting like a button
        e.preventDefault();
        // Get the field name
        var quantity = parseInt($("#quantity").val());

        // If is not undefined

        $("#quantity").val(quantity + 1);

        // Increment
      });

      $(".quantity-left-minus").click(function (e) {
        // Stop acting like a button
        e.preventDefault();
        // Get the field name
        var quantity = parseInt($("#quantity").val());

        // If is not undefined

        // Increment
        if (quantity > 0) {
          $("#quantity").val(quantity - 1);
        }
      });
    });
  </script>
</body>
</html>
