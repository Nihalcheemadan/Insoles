
    <%- include('../adminHeader.ejs') -%>

    <div class="container " style="margin-bottom: 150px;">
        <div class="main-body mt-5 ">
            <br> <br>
            <h3 class="text-center">Orders</h3>
            <div class="row gutters-sm mt-5">
    
    
    
            </div>
            <div class="card">
                <div class="card-body d-flex  justify-content-around">
                    <div  style="width:30%;margin-left: 15px;">
                        <p>Image</p>
                    </div>
                    <div class="" style="width:25%">
                        <table>
    
                            <tr>
                                <td>Products</td>
                            </tr>
    
                        </table>
                    </div>
                    <div style="width:100%;">
                        <ul  class="d-flex justify-content-around">
                            <p>OrderStatus</p>
    
                            <li style="list-style-type: none;">
                                TotalPrice</li>
                            <li style="list-style-type: none;">Ordered Date</li>
                            <li style="list-style-type: none;">View</li>
                            <li style="list-style-type: none;">Cancel</li>
    
                        </ul>
                    </div>
                </div>
                <div>
    
                </div>
            </div>
            <% orders.forEach(function(order){ %>
                <% order.products.forEach(function(x){ %>
            <div class="card">
                <div class="card-body d-flex  justify-content-around  align-items-around">
                    <div style="width:30%;height:100px;">
                        
                        <ol>
                            <img src="/<%= x.productId.image  %> " style="width:50px;height:50px">
                        </ol>
                       
                    </div>
                    <div class="" style="width:25% ; margin-left: 15px;" >
                        <table>
                           
                            <ol>
                               <%= x.productId.name  %> 
                            </ol>
                            
                        </table>
                    </div>
                    <div style="width:100%;" class="d-flex justify-content-around align-items-around">
                        
    
                            <input type="hidden" name="stat" class="stat class" value="<%= order.orderStatus  %>">
                            
                            <div style="width: 20%;">
                                <p id="Status_i" style="margin-left: 55px;" class="OrderStatus text-center text-success">
                                    <%= order.orderStatus  %> </p>
                            </div>
                           
                            <div class="d-flex justify-content-center" style="width: 20%;">
    
                                <span style="margin-left: 25px;" class="text-center ms-3"><%= x.productId.price   %></span>
                            </div>
                            
                            <div class="d-flex justify-content-center" style="width: 20%; ">
                                <%= order.date  %>
                            </div>
                            
                            <div class="d-flex justify-content-center" style="width: 15%;">
                                <a href="/login/productdetail/<%= x.productId._id %>" class="">
                                <i class="fa fa-eye" aria-hidden="false"></i></a>
                            </div>
                           
                            <!-- <div class="d-flex justify-content-center" style="width: 15%;">
                                <li style=""> <button onclick="returnorder('{{this.id}}')" class="">
                                    </button></li>
                            </div>
                            
                            <div class="d-flex justify-content-center" style="width: 15%;">
                                <li style=""> <button onclick="returnorder('{{this.id}}')" class=""> <img
                                            src="https://static.thenounproject.com/png/575813-200.png"
                                            style="width: 30px;height: 30px;">
                                    </button></li>
                            </div>
                            
                            <div class="d-flex justify-content-center" style="width: 15%;">
                                <li style=""> <button onclick="cancelorder('{{this.id}}')" class=""> <i style="color: red;"
                                            class=" fa fa-ban" aria-hidden="true"></i>
                                    </button></li>
                            </div> -->
                    </div>
                    
    
    
                    
    
                    <div class="d-flex justify-content-center" style="width: 15%;">
                        <li style="margin-right: 35px;list-style-type: none;" > <button onclick="cancelorder('<%= order._id %>')" class=""> <i style="color: red;"
                                    class=" fa fa-ban" aria-hidden="true"></i>
                            </button></li>
                    </div>
                    
    
    
                    </ul>
                </div>
            </div>
            <% }) %>
            <% }) %>
        
            <div>
    
            </div>
        </div>
      
    </div>
    
    </div>
    </div>
    </div>
    <script>
        function cancelorder(id) {
            //  return swal.("are you sure")
            swal({
                title: "Are you sure?",
                text: "Once you Cancelled, you will not be able to recover this action!",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            })
                .then((willDelete) => {
                    if (willDelete) {
                        swal("This Order is Cancelling.!", {
                            icon: "warning"
                        });
                        location.assign(`/cancel-order/${id}`);
                    }
                });
    
        }
        // function returnorder(id) {
        //     swal({
        //         title: "Are you sure?",
        //         text: "Do you Want to return this Order!",
        //         icon: "warning",
        //         buttons: true,
        //         dangerMode: true,
        //     })
        //         .then((willDelete) => {
        //             if (willDelete) {
    
        //                 location.assign(`/return-order/${id}`);
        //             }
        //         });
    
        // }
    
    </script>
    
    <script>
        $(document).ready(function () {
    
            console.log(stat)
            if (stat == 'Cancelled') {
    
                $("p.OrderStatus").addClass("text-danger");
            }
        });
    </script>
    
    <%- include('../adminFooter.ejs') -%>